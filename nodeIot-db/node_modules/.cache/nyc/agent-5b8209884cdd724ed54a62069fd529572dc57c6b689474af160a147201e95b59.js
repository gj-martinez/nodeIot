'use strict';function cov_paql2sebt(){var path="/home/gonza/Desktop/Platzi/nodeIot/nodeIot-db/lib/agent.js";var hash="c8329e833147501e264d2fced7308214d116ebe5";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/gonza/Desktop/Platzi/nodeIot/nodeIot-db/lib/agent.js",statementMap:{"0":{start:{line:3,column:0},end:{line:60,column:1}},"1":{start:{line:5,column:21},end:{line:9,column:9}},"2":{start:{line:10,column:30},end:{line:10,column:61}},"3":{start:{line:12,column:8},end:{line:15,column:9}},"4":{start:{line:13,column:28},end:{line:13,column:65}},"5":{start:{line:14,column:12},end:{line:14,column:70}},"6":{start:{line:17,column:23},end:{line:17,column:54}},"7":{start:{line:18,column:8},end:{line:18,column:30}},"8":{start:{line:21,column:8},end:{line:21,column:39}},"9":{start:{line:25,column:8},end:{line:29,column:10}},"10":{start:{line:33,column:8},end:{line:33,column:36}},"11":{start:{line:37,column:8},end:{line:41,column:10}},"12":{start:{line:45,column:8},end:{line:50,column:10}},"13":{start:{line:52,column:4},end:{line:59,column:5}}},fnMap:{"0":{name:"setupAgent",decl:{start:{line:3,column:26},end:{line:3,column:36}},loc:{start:{line:3,column:49},end:{line:60,column:1}},line:3},"1":{name:"createOrUpdate",decl:{start:{line:4,column:19},end:{line:4,column:33}},loc:{start:{line:4,column:40},end:{line:19,column:5}},line:4},"2":{name:"findById",decl:{start:{line:20,column:13},end:{line:20,column:21}},loc:{start:{line:20,column:25},end:{line:22,column:5}},line:20},"3":{name:"findByUuid",decl:{start:{line:24,column:13},end:{line:24,column:23}},loc:{start:{line:24,column:29},end:{line:30,column:5}},line:24},"4":{name:"findAll",decl:{start:{line:32,column:13},end:{line:32,column:20}},loc:{start:{line:32,column:22},end:{line:34,column:5}},line:32},"5":{name:"findConnected",decl:{start:{line:36,column:13},end:{line:36,column:26}},loc:{start:{line:36,column:28},end:{line:42,column:5}},line:36},"6":{name:"findByUsername",decl:{start:{line:44,column:13},end:{line:44,column:27}},loc:{start:{line:44,column:37},end:{line:51,column:5}},line:44}},branchMap:{"0":{loc:{start:{line:12,column:8},end:{line:15,column:9}},type:"if",locations:[{start:{line:12,column:8},end:{line:15,column:9}},{start:{line:12,column:8},end:{line:15,column:9}}],line:12},"1":{loc:{start:{line:14,column:19},end:{line:14,column:70}},type:"cond-expr",locations:[{start:{line:14,column:29},end:{line:14,column:54}},{start:{line:14,column:57},end:{line:14,column:70}}],line:14}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c8329e833147501e264d2fced7308214d116ebe5"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_paql2sebt=function(){return actualCoverage;};}return actualCoverage;}cov_paql2sebt();cov_paql2sebt().s[0]++;module.exports=function setupAgent(AgentModels){cov_paql2sebt().f[0]++;async function createOrUpdate(agent){cov_paql2sebt().f[1]++;const cond=(cov_paql2sebt().s[1]++,{where:{uuid:agent.uuid}});const existingAgent=(cov_paql2sebt().s[2]++,await AgentModels.findOne(cond));cov_paql2sebt().s[3]++;if(existingAgent){cov_paql2sebt().b[0][0]++;const updated=(cov_paql2sebt().s[4]++,await AgentModels.update(agent,cond));cov_paql2sebt().s[5]++;return updated?(cov_paql2sebt().b[1][0]++,AgentModels.findOne(cond)):(cov_paql2sebt().b[1][1]++,existingAgent);}else{cov_paql2sebt().b[0][1]++;}const result=(cov_paql2sebt().s[6]++,await AgentModels.create(agent));cov_paql2sebt().s[7]++;return result.toJSON();}function findById(id){cov_paql2sebt().f[2]++;cov_paql2sebt().s[8]++;return AgentModels.findById(id);}function findByUuid(uuid){cov_paql2sebt().f[3]++;cov_paql2sebt().s[9]++;return AgentModels.findOne({where:{uuid}});}function findAll(){cov_paql2sebt().f[4]++;cov_paql2sebt().s[10]++;return AgentModels.findAll();}function findConnected(){cov_paql2sebt().f[5]++;cov_paql2sebt().s[11]++;return AgentModels.findAll({where:{connected:true}});}function findByUsername(username){cov_paql2sebt().f[6]++;cov_paql2sebt().s[12]++;return AgentModels.findAll({where:{username,connected:true}});}cov_paql2sebt().s[13]++;return{createOrUpdate,findById,findByUuid,findAll,findConnected,findByUsername};};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFnZW50LmpzIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJzZXR1cEFnZW50IiwiQWdlbnRNb2RlbHMiLCJjcmVhdGVPclVwZGF0ZSIsImFnZW50IiwiY29uZCIsIndoZXJlIiwidXVpZCIsImV4aXN0aW5nQWdlbnQiLCJmaW5kT25lIiwidXBkYXRlZCIsInVwZGF0ZSIsInJlc3VsdCIsImNyZWF0ZSIsInRvSlNPTiIsImZpbmRCeUlkIiwiaWQiLCJmaW5kQnlVdWlkIiwiZmluZEFsbCIsImZpbmRDb25uZWN0ZWQiLCJjb25uZWN0ZWQiLCJmaW5kQnlVc2VybmFtZSIsInVzZXJuYW1lIl0sIm1hcHBpbmdzIjoiQUFBQSxhLDgyRkFlWTtnSEFiWkEsTUFBTSxDQUFDQyxPQUFQLENBQWlCLFFBQVNDLENBQUFBLFVBQVQsQ0FBb0JDLFdBQXBCLENBQWdDLHdCQUM3QyxjQUFlQyxDQUFBQSxjQUFmLENBQThCQyxLQUE5QixDQUFvQyx3QkFDaEMsS0FBTUMsQ0FBQUEsSUFBSSx5QkFBRyxDQUNUQyxLQUFLLENBQUUsQ0FDSEMsSUFBSSxDQUFFSCxLQUFLLENBQUNHLElBRFQsQ0FERSxDQUFILENBQVYsQ0FLQSxLQUFNQyxDQUFBQSxhQUFhLHlCQUFHLEtBQU1OLENBQUFBLFdBQVcsQ0FBQ08sT0FBWixDQUFvQkosSUFBcEIsQ0FBVCxDQUFuQixDQU5nQyx1QkFRaEMsR0FBR0csYUFBSCxDQUFpQiwyQkFDYixLQUFNRSxDQUFBQSxPQUFPLHlCQUFHLEtBQU1SLENBQUFBLFdBQVcsQ0FBQ1MsTUFBWixDQUFtQlAsS0FBbkIsQ0FBMEJDLElBQTFCLENBQVQsQ0FBYixDQURhLHVCQUViLE1BQU9LLENBQUFBLE9BQU8sNEJBQUdSLFdBQVcsQ0FBQ08sT0FBWixDQUFvQkosSUFBcEIsQ0FBSCw2QkFBK0JHLGFBQS9CLENBQWQsQ0FDSCxDQUhELGdDQUtBLEtBQU1JLENBQUFBLE1BQU0seUJBQUcsS0FBTVYsQ0FBQUEsV0FBVyxDQUFDVyxNQUFaLENBQW1CVCxLQUFuQixDQUFULENBQVosQ0FiZ0MsdUJBY2hDLE1BQU9RLENBQUFBLE1BQU0sQ0FBQ0UsTUFBUCxFQUFQLENBQ0gsQ0FDRCxRQUFTQyxDQUFBQSxRQUFULENBQWtCQyxFQUFsQixDQUFxQiwrQ0FDakIsTUFBT2QsQ0FBQUEsV0FBVyxDQUFDYSxRQUFaLENBQXFCQyxFQUFyQixDQUFQLENBQ0gsQ0FFRCxRQUFTQyxDQUFBQSxVQUFULENBQW9CVixJQUFwQixDQUF5QiwrQ0FDckIsTUFBT0wsQ0FBQUEsV0FBVyxDQUFDTyxPQUFaLENBQW9CLENBQ3ZCSCxLQUFLLENBQUUsQ0FDSEMsSUFERyxDQURnQixDQUFwQixDQUFQLENBS0gsQ0FFRCxRQUFTVyxDQUFBQSxPQUFULEVBQWtCLGdEQUNkLE1BQU9oQixDQUFBQSxXQUFXLENBQUNnQixPQUFaLEVBQVAsQ0FDSCxDQUVELFFBQVNDLENBQUFBLGFBQVQsRUFBd0IsZ0RBQ3BCLE1BQU9qQixDQUFBQSxXQUFXLENBQUNnQixPQUFaLENBQW9CLENBQ3ZCWixLQUFLLENBQUUsQ0FDSGMsU0FBUyxDQUFDLElBRFAsQ0FEZ0IsQ0FBcEIsQ0FBUCxDQUtILENBRUQsUUFBU0MsQ0FBQUEsY0FBVCxDQUF3QkMsUUFBeEIsQ0FBaUMsZ0RBQzdCLE1BQU9wQixDQUFBQSxXQUFXLENBQUNnQixPQUFaLENBQW9CLENBQ3ZCWixLQUFLLENBQUUsQ0FDSGdCLFFBREcsQ0FFSEYsU0FBUyxDQUFFLElBRlIsQ0FEZ0IsQ0FBcEIsQ0FBUCxDQU1ILENBaEQ0Qyx3QkFpRDdDLE1BQU0sQ0FDRmpCLGNBREUsQ0FFRlksUUFGRSxDQUdGRSxVQUhFLENBSUZDLE9BSkUsQ0FLRkMsYUFMRSxDQU1GRSxjQU5FLENBQU4sQ0FRSCxDQXpERCIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHNldHVwQWdlbnQoQWdlbnRNb2RlbHMpe1xuICAgIGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlKGFnZW50KXtcbiAgICAgICAgY29uc3QgY29uZCA9IHtcbiAgICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICAgICAgdXVpZDogYWdlbnQudXVpZFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nQWdlbnQgPSBhd2FpdCBBZ2VudE1vZGVscy5maW5kT25lKGNvbmQpXG5cbiAgICAgICAgaWYoZXhpc3RpbmdBZ2VudCl7XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkID0gYXdhaXQgQWdlbnRNb2RlbHMudXBkYXRlKGFnZW50LCBjb25kKVxuICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWQgPyBBZ2VudE1vZGVscy5maW5kT25lKGNvbmQpIDogZXhpc3RpbmdBZ2VudFxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQWdlbnRNb2RlbHMuY3JlYXRlKGFnZW50KVxuICAgICAgICByZXR1cm4gcmVzdWx0LnRvSlNPTigpXG4gICAgfVxuICAgIGZ1bmN0aW9uIGZpbmRCeUlkKGlkKXtcbiAgICAgICAgcmV0dXJuIEFnZW50TW9kZWxzLmZpbmRCeUlkKGlkKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZpbmRCeVV1aWQodXVpZCl7XG4gICAgICAgIHJldHVybiBBZ2VudE1vZGVscy5maW5kT25lKHtcbiAgICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICAgICAgdXVpZFxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZpbmRBbGwoKXtcbiAgICAgICAgcmV0dXJuIEFnZW50TW9kZWxzLmZpbmRBbGwoKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZpbmRDb25uZWN0ZWQoKXtcbiAgICAgICAgcmV0dXJuIEFnZW50TW9kZWxzLmZpbmRBbGwoe1xuICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgICBjb25uZWN0ZWQ6dHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZpbmRCeVVzZXJuYW1lKHVzZXJuYW1lKXtcbiAgICAgICAgcmV0dXJuIEFnZW50TW9kZWxzLmZpbmRBbGwoe1xuICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgICB1c2VybmFtZSxcbiAgICAgICAgICAgICAgICBjb25uZWN0ZWQ6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJue1xuICAgICAgICBjcmVhdGVPclVwZGF0ZSxcbiAgICAgICAgZmluZEJ5SWQsXG4gICAgICAgIGZpbmRCeVV1aWQsXG4gICAgICAgIGZpbmRBbGwsXG4gICAgICAgIGZpbmRDb25uZWN0ZWQsXG4gICAgICAgIGZpbmRCeVVzZXJuYW1lXG4gICAgfVxufSJdfQ==